<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PX4 | OpenUAS</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Designing and building an open source fixed-wing UAS">
    
    <link rel="preload" href="/assets/css/0.styles.0269e3c7.css" as="style"><link rel="preload" href="/assets/js/app.eda22d22.js" as="script"><link rel="preload" href="/assets/js/2.517fe05d.js" as="script"><link rel="preload" href="/assets/js/9.8b8db00a.js" as="script"><link rel="prefetch" href="/assets/js/10.0a8ec066.js"><link rel="prefetch" href="/assets/js/11.80b78868.js"><link rel="prefetch" href="/assets/js/12.dce71819.js"><link rel="prefetch" href="/assets/js/13.8dc4e09c.js"><link rel="prefetch" href="/assets/js/14.7fb9be0e.js"><link rel="prefetch" href="/assets/js/15.d5de285f.js"><link rel="prefetch" href="/assets/js/16.0c522abc.js"><link rel="prefetch" href="/assets/js/17.01c56ed5.js"><link rel="prefetch" href="/assets/js/18.42e197d9.js"><link rel="prefetch" href="/assets/js/19.6be9475b.js"><link rel="prefetch" href="/assets/js/20.6d8d0f01.js"><link rel="prefetch" href="/assets/js/21.29ac9499.js"><link rel="prefetch" href="/assets/js/22.e64fdc2b.js"><link rel="prefetch" href="/assets/js/23.739bb5cb.js"><link rel="prefetch" href="/assets/js/24.e9d5d06f.js"><link rel="prefetch" href="/assets/js/25.27befc1b.js"><link rel="prefetch" href="/assets/js/26.8ffe3034.js"><link rel="prefetch" href="/assets/js/27.fa0ab718.js"><link rel="prefetch" href="/assets/js/28.602a7d94.js"><link rel="prefetch" href="/assets/js/29.4f9d47d2.js"><link rel="prefetch" href="/assets/js/3.fdd406d4.js"><link rel="prefetch" href="/assets/js/30.4fd86720.js"><link rel="prefetch" href="/assets/js/31.d421a780.js"><link rel="prefetch" href="/assets/js/32.3e730c3e.js"><link rel="prefetch" href="/assets/js/33.de056465.js"><link rel="prefetch" href="/assets/js/34.0225e98b.js"><link rel="prefetch" href="/assets/js/35.12995804.js"><link rel="prefetch" href="/assets/js/36.20d018e5.js"><link rel="prefetch" href="/assets/js/37.c3be4d80.js"><link rel="prefetch" href="/assets/js/38.74e8c1fa.js"><link rel="prefetch" href="/assets/js/39.df351819.js"><link rel="prefetch" href="/assets/js/4.ec3a7a51.js"><link rel="prefetch" href="/assets/js/40.894f1f8d.js"><link rel="prefetch" href="/assets/js/41.4ca4532f.js"><link rel="prefetch" href="/assets/js/42.a9faba16.js"><link rel="prefetch" href="/assets/js/43.71f57f34.js"><link rel="prefetch" href="/assets/js/44.f2ee7ec7.js"><link rel="prefetch" href="/assets/js/45.cccf4c29.js"><link rel="prefetch" href="/assets/js/46.a7834a64.js"><link rel="prefetch" href="/assets/js/47.0af1ddc8.js"><link rel="prefetch" href="/assets/js/48.7fe5f6f6.js"><link rel="prefetch" href="/assets/js/49.4c190c07.js"><link rel="prefetch" href="/assets/js/5.77be71a3.js"><link rel="prefetch" href="/assets/js/50.eb0d3b56.js"><link rel="prefetch" href="/assets/js/51.949dbaa3.js"><link rel="prefetch" href="/assets/js/52.793af8d0.js"><link rel="prefetch" href="/assets/js/53.e41a754a.js"><link rel="prefetch" href="/assets/js/54.787266c3.js"><link rel="prefetch" href="/assets/js/55.652c65eb.js"><link rel="prefetch" href="/assets/js/56.b109f986.js"><link rel="prefetch" href="/assets/js/57.08703eff.js"><link rel="prefetch" href="/assets/js/6.a56dbf4b.js"><link rel="prefetch" href="/assets/js/7.f92687cf.js"><link rel="prefetch" href="/assets/js/8.1be14d2d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0269e3c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="OpenUAS" class="logo"> <span class="site-name can-hide">OpenUAS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Intro/" class="nav-link">
  Intro
</a></div><div class="nav-item"><a href="/Meta_Docs/" class="nav-link">
  Meta Docs
</a></div><div class="nav-item"><a href="/Design/" class="nav-link">
  Design
</a></div><div class="nav-item"><a href="/Manufacturing/" class="nav-link">
  Manufacturing
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Software/Electrical" class="dropdown-title"><span class="title">Software/Electrical</span> <span class="arrow down"></span></button> <button type="button" aria-label="Software/Electrical" class="mobile-dropdown-title"><span class="title">Software/Electrical</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Software/" class="nav-link router-link-active">
  Software
</a></li><li class="dropdown-item"><!----> <a href="/Electrical/" class="nav-link">
  Electrical
</a></li></ul></div></div><div class="nav-item"><a href="/Lab_Docs/" class="nav-link">
  Lab Docs
</a></div><div class="nav-item"><a href="/License/" class="nav-link">
  License
</a></div><div class="nav-item"><a href="https://open-uas.github.io/Archive/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Archive
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/Open-UAS/Open-UAS.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Intro/" class="nav-link">
  Intro
</a></div><div class="nav-item"><a href="/Meta_Docs/" class="nav-link">
  Meta Docs
</a></div><div class="nav-item"><a href="/Design/" class="nav-link">
  Design
</a></div><div class="nav-item"><a href="/Manufacturing/" class="nav-link">
  Manufacturing
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Software/Electrical" class="dropdown-title"><span class="title">Software/Electrical</span> <span class="arrow down"></span></button> <button type="button" aria-label="Software/Electrical" class="mobile-dropdown-title"><span class="title">Software/Electrical</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Software/" class="nav-link router-link-active">
  Software
</a></li><li class="dropdown-item"><!----> <a href="/Electrical/" class="nav-link">
  Electrical
</a></li></ul></div></div><div class="nav-item"><a href="/Lab_Docs/" class="nav-link">
  Lab Docs
</a></div><div class="nav-item"><a href="/License/" class="nav-link">
  License
</a></div><div class="nav-item"><a href="https://open-uas.github.io/Archive/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Archive
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/Open-UAS/Open-UAS.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/Software/PX4.html" aria-current="page" class="active sidebar-link">PX4</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Software/PX4.html#dev-environment-setup" class="sidebar-link">Dev Environment Setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Software/PX4.html#using-the-docker-toolchain-recommended" class="sidebar-link">Using the Docker Toolchain (Recommended)</a></li><li class="sidebar-sub-header"><a href="/Software/PX4.html#without-docker" class="sidebar-link">Without Docker</a></li></ul></li><li class="sidebar-sub-header"><a href="/Software/PX4.html#building-and-flashing-custom-firmware" class="sidebar-link">Building and Flashing Custom Firmware</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Software/PX4.html#building-with-docker-recommended" class="sidebar-link">Building with Docker (Recommended)</a></li><li class="sidebar-sub-header"><a href="/Software/PX4.html#building-on-ubuntu-18-04-20-04-native-virtual-machine" class="sidebar-link">Building on Ubuntu 18.04/20.04 Native/Virtual Machine</a></li><li class="sidebar-sub-header"><a href="/Software/PX4.html#flash-firmware-with-qgroundcontrol" class="sidebar-link">Flash Firmware With QGroundControl</a></li></ul></li><li class="sidebar-sub-header"><a href="/Software/PX4.html#custom-airframes" class="sidebar-link">Custom Airframes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Software/PX4.html#openuas-airframe-2150" class="sidebar-link">OpenUAS Airframe (2150)</a></li><li class="sidebar-sub-header"><a href="/Software/PX4.html#apprentice-airframe-2151" class="sidebar-link">Apprentice Airframe (2151)</a></li></ul></li><li class="sidebar-sub-header"><a href="/Software/PX4.html#openuas-mixer" class="sidebar-link">OpenUAS Mixer</a></li><li class="sidebar-sub-header"><a href="/Software/PX4.html#parameters-and-configuration" class="sidebar-link">Parameters and Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Software/PX4.html#important-parameters" class="sidebar-link">Important Parameters</a></li></ul></li></ul></li><li><a href="/Software/QGroundControl.html" class="sidebar-link">QGroundControl</a></li><li><a href="/Software/Simulation.html" class="sidebar-link">Simulation</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="px4"><a href="#px4" class="header-anchor">#</a> PX4</h1> <p>PX4 autopilot is the main software stack that controls the UAS. It has been forked to the <a href="https://github.com/Open-UAS/PX4-Autopilot" target="_blank" rel="noopener noreferrer">OpenUAS repo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to allow our own custom modifications. The upstream repo can be viewed at, <a href="https://github.com/PX4/PX4-Autopilot" target="_blank" rel="noopener noreferrer">github.com/PX4/PX4-Autopilot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>PX4 allows for many out of the box capabilities such as flight stabilization, automatic flight paths, and automatic take off. Further details about PX4's features can be found in the <a href="https://docs.px4.io/main/en/" target="_blank" rel="noopener noreferrer">PX4 documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="dev-environment-setup"><a href="#dev-environment-setup" class="header-anchor">#</a> Dev Environment Setup</h2> <p>This setup can get fairly complicated with all the dependencies that PX4 requires. A new method that alleviates some of this is using a docker container to compile PX4. This pre-packages the dependencies required to build PX4</p> <h3 id="using-the-docker-toolchain-recommended"><a href="#using-the-docker-toolchain-recommended" class="header-anchor">#</a> Using the Docker Toolchain (Recommended)</h3> <p><strong>Windows with WSL 2</strong></p> <ol><li>Be sure virtualization is enabled on your machine through the bios.</li> <li>Install Windows Subsystem for Linux 2 (WSL 2) by opening an <em>administrator</em> command prompt and running <code>wsl --install --distribution Ubuntu-20.04</code></li> <li>Reboot your machine</li> <li>Install Docker engine through WSL2, <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Docker Engine, Ubuntu install<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Do <a href="https://docs.docker.com/engine/install/linux-postinstall/" target="_blank" rel="noopener noreferrer">Docker post install steps<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to run docker as non-root.</li> <li>Once your development tools are all setup, go ahead and use git to clone the OpenUAS PX4-autopilot repository from <a href="https://github.com/Open-UAS/PX4-Autopilot" target="_blank" rel="noopener noreferrer">https://github.com/Open-UAS/PX4-Autopilot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and checkout the stable branch.</li></ol> <p><strong>Linux</strong></p> <ol><li>Install Docker engine, <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Docker Engine, Ubuntu install<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Do <a href="https://docs.docker.com/engine/install/linux-postinstall/" target="_blank" rel="noopener noreferrer">Docker post install steps<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to run docker as non-root.</li> <li>Once your development tools are all setup, go ahead and clone the OpenUAS PX4-autopilot repository from <a href="https://github.com/Open-UAS/PX4-Autopilot" target="_blank" rel="noopener noreferrer">https://github.com/Open-UAS/PX4-Autopilot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and checkout the stable branch.</li></ol> <h3 id="without-docker"><a href="#without-docker" class="header-anchor">#</a> Without Docker</h3> <p><strong>Windows with WSL 2</strong></p> <ol><li>Install Windows Subsystem for Linux 2 (WSL 2) by opening an <em>administrator</em> command prompt and running <code>wsl --install --distribution Ubuntu-20.04</code></li> <li>Reboot your machine</li> <li>Once your development tools are all setup, go ahead and clone the OpenUAS PX4-autopilot repository from <a href="https://github.com/Open-UAS/PX4-Autopilot" target="_blank" rel="noopener noreferrer">https://github.com/Open-UAS/PX4-Autopilot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and checkout the stable branch.</li></ol> <p><strong>Ubuntu 18.04/20.04 Native/Virtual Machine</strong></p> <p>Note from the PX4 User Guide:</p> <p>The supported OS versions for PX4 development are Ubuntu Linux LTS 18.04 (Bionic Beaver) and 20.04 (Focal Fossa).</p> <ol><li>Clone forked px4 repository to your machine <code>git clone --branch stable https://github.com/LTL-AERO/PX4-Autopilot.git</code></li> <li>Move into the newly cloned px4 repository <code>cd PX4-Autopilot</code></li> <li>Run <code>git submodule update --init --recursive</code> to clone all submodules within the repository, to your machine
<ul><li>alternatively <code>git submodule update --init --recursive &lt;submodule folder&gt;</code> can be used if you know the specific submodule needed</li> <li><code>git submodule update --recursive</code> can be run in the future to update all submodules</li></ul></li> <li>Setup development environment and install dependencies, more information about development environment setup can be found here: <a href="https://dev.px4.io/master/en/setup/dev_env_linux.html" target="_blank" rel="noopener noreferrer">https://dev.px4.io/master/en/setup/dev_env_linux.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>Run the ubuntu.sh to install the required dependencies(including gazebo for simulation) then reboot:<code>bash ./Tools/setup/ubuntu.sh</code></li></ul></li> <li>Done.
<ul><li><a href="#building-on-ubuntu-18-04-20-04-native-virtual-machine">Steps for building PX4 firmware</a></li> <li><a href="/Software/Simulation.html#without-docker">Steps for running Gazebo</a></li></ul></li></ol> <p><strong>Native Windows</strong></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This configuration will not be able to run the gazebo simulation.
Gazebo is a Linux only software so it must be run through WSL or natively on Linux.</p></div> <ul><li>Details on this configuration may be lacking as not many people have used it before.</li> <li>Check the PX4 docs for this configuration <a href="https://docs.px4.io/main/en/dev_setup/dev_env_windows_cygwin.html" target="_blank" rel="noopener noreferrer">https://docs.px4.io/main/en/dev_setup/dev_env_windows_cygwin.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="building-and-flashing-custom-firmware"><a href="#building-and-flashing-custom-firmware" class="header-anchor">#</a> Building and Flashing Custom Firmware</h2> <p>See <a href="#dev-environment-setup">Dev Environment Setup</a> for setup details.</p> <h3 id="building-with-docker-recommended"><a href="#building-with-docker-recommended" class="header-anchor">#</a> Building with Docker (Recommended)</h3> <ol><li>Open a linux terminal to the root of the PX4 folder structure.</li> <li>Be sure the docker daemon is running by running <code>sudo service docker start</code> or <code>sudo systemctl start docker</code> depending on if your distro uses SysVinit or Systemd.</li> <li>Run <code>./Tools/docker_run.sh make px4_fmu-v5_default</code>. This will start a new docker container and compile the firmware for Pixhawk 4.
<ul><li>If you get compilation errors, it can be a good idea to run <code>./Tools/docker_run.sh make clean</code> to put the build process in a clean state</li> <li>Using the docker build script follows this format, <code>./Tools/docker_run.sh {command to execute}</code> <ul><li><code>./Tools/docker_run.sh bash</code> can be run to look around in the docker container file system</li></ul></li> <li>See <a href="https://docs.px4.io/main/en/dev_setup/building_px4.html#nuttx-pixhawk-based-boards" target="_blank" rel="noopener noreferrer">Building PX4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for all available targets</li></ul></li> <li>Once compilation is complete the firmware will be under the <code>build</code> folder as <code>px4_fmu-v5_default.px4</code> among other files.</li></ol> <h3 id="building-on-ubuntu-18-04-20-04-native-virtual-machine"><a href="#building-on-ubuntu-18-04-20-04-native-virtual-machine" class="header-anchor">#</a> Building on Ubuntu 18.04/20.04 Native/Virtual Machine</h3> <ul><li>Open a linux terminal to the root of the PX4 folder structure.</li> <li>Run <code>make px4_fmu-v5_default</code>.
<ul><li>If you get compilation errors, it can be a good idea to run <code>make clean</code> to put the build process in a clean state</li> <li>See <a href="https://docs.px4.io/main/en/dev_setup/building_px4.html" target="_blank" rel="noopener noreferrer">Building PX4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for all available targets</li></ul></li> <li>Once compilation is complete the firmware will be under the <code>build</code> folder as <code>px4_fmu-v5_default.px4</code> among other files.</li></ul> <h3 id="flash-firmware-with-qgroundcontrol"><a href="#flash-firmware-with-qgroundcontrol" class="header-anchor">#</a> Flash Firmware With QGroundControl</h3> <ul><li>Open QGC and go to vehicle setup, then firmware tab.</li> <li>Plug the Pixhawk 4 into your machine via USB, it should auto detect and QGC will prompt you what firmware to flash.</li> <li>Select advanced settings, and set the custom firmware file option in the version drop down.
<img src="/d45248757a154b54626badf48944fa2f.jpg" alt="Advanced settings"></li> <li>Select our newly created <code>PX4_fmu-v5_default.px4</code> file and click ok to start flashing.</li> <li>Wait for the Pixhawk to reboot to complete the update.</li></ul> <h2 id="custom-airframes"><a href="#custom-airframes" class="header-anchor">#</a> Custom Airframes</h2> <p>Within PX4 there are definitions called <a href="https://docs.px4.io/main/en/dev_airframes/#airframes" target="_blank" rel="noopener noreferrer">airframes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. These definitions control things like, number of control surfaces, propeller configurations, and vehicle parameters among other settings. PX4 comes <a href="https://docs.px4.io/main/en/airframes/airframe_reference.html" target="_blank" rel="noopener noreferrer">pre-loaded<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with many airframes, but we can add our own custom airframes to support configuration and modification efforts.</p> <p>The PX4 docs have a great step by step guide for adding a new airframe <a href="https://docs.px4.io/main/en/dev_airframes/adding_a_new_frame.html" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>In this documentation we will cover what has been added to stock PX4 to get the new airframes setup.</p> <h3 id="openuas-airframe-2150"><a href="#openuas-airframe-2150" class="header-anchor">#</a> OpenUAS Airframe (2150)</h3> <p>This airframe is intended for the current OpenUAS vehicle and should be adapted and modified as the physical design changes.</p> <ul><li>Created new config file in <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/init.d/airframes/2150_open_uas" target="_blank" rel="noopener noreferrer">ROMFS/px4fmu_common/init.d/airframes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/init.d-posix/airframes/2150_open_uas" target="_blank" rel="noopener noreferrer">ROMFS/px4fmu_common/init.d-posix/airframes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (the posix folder is used by the gazebo simulation while the non-posix folder is used by the Pixhawk. The config files' content should be identical) with the autostart id prepended to the filename.</li> <li>Added the new config file to the airframe CMakeLists.txt file in each folder, <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/init.d/airframes/CMakeLists.txt#L47" target="_blank" rel="noopener noreferrer">ROMFS/init.d/airframes/CMakeLists.txt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/init.d-posix/airframes/CMakeLists.txt#L75" target="_blank" rel="noopener noreferrer">ROMFS/init.d-posix/airframes/CMakeLists.txt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Added OpenUAS mixer to <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/mixers/open_uas_apprentice.main.mix" target="_blank" rel="noopener noreferrer">/ROMFS/px4mu_common/mixers/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>Which mixer to use is set in the airframe config file created earlier.</li> <li><a href="#openuas-mixer">See below</a> for more details on mixers.</li></ul></li></ul> <p>See <a href="/Software/QGroundControl.html#using-the-openuas-airframe">Using The OpenUAS Airframe</a> for details and enabling the new airframe in QGC.</p> <h3 id="apprentice-airframe-2151"><a href="#apprentice-airframe-2151" class="header-anchor">#</a> Apprentice Airframe (2151)</h3> <p>This airframe is intended to run on the Apprentice aircraft that we utilize for other development tasks. This airframe was not utilized as much as the other so may not be up to date.</p> <p>A similar approach was taken to add this custom airframe as previous.</p> <ul><li>Add the new config file to <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/init.d/airframes/2151_open_uas_apprentice" target="_blank" rel="noopener noreferrer">ROMFS/px4fmu_common/init.d/airframes/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Add the config file to the <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/init.d/airframes/CMakeLists.txt#L48" target="_blank" rel="noopener noreferrer">CMakeLists.txt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> file</li></ul> <h2 id="openuas-mixer"><a href="#openuas-mixer" class="header-anchor">#</a> OpenUAS Mixer</h2> <p><a href="https://docs.px4.io/main/en/concept/mixing.html" target="_blank" rel="noopener noreferrer">Mixers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are used to take commands (roll, pitch, yaw, throttle) from the PX4 system and map those commands to actuator outputs, including servo mapping, min and max values, and direction. This is preferable to mapping the outputs with the RC controller because the autopilot will utilize the mixer and not the RC controller mappings. Meaning the trims, and servo mappings can be applied system wide.</p> <p>The mixer for the custom airframes are defined in the <code>ROMFS/px4fmu_common/mixers</code> folder eg <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/mixers/open_uas_apprentice.main.mix" target="_blank" rel="noopener noreferrer">open_uas_apprentice.main.mix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> . The mixer files can get somewhat confusing to understand, details on writing mixers can be found on the <a href="https://docs.px4.io/main/en/concept/mixing.html#px4-mixer-definitions" target="_blank" rel="noopener noreferrer">PX4 docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The general idea is that you have n number of actuator outputs, each of those n actuators are defined to be driven by 1 or more outputs from PX4. The mixer file is defined sequentially, starting with actuator 1, then 2, 3 ... to n actuators. These actuator numbers correspond to the pwm port number on the <a href="http://localhost:8080/Electrical/#current-wiring-diagram" target="_blank" rel="noopener noreferrer">Pixhawk wiring<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>The default mixer file can be <strong>overridden</strong> at runtime by placing the mix file with the same name (eg <code>open_uas_apprentice.main.mix</code>) onto the Pixhawk SD card under <code>/etc/mixers/</code> This mix file will be loaded instead of the default one defined at compile time.</p> <h2 id="parameters-and-configuration"><a href="#parameters-and-configuration" class="header-anchor">#</a> Parameters and Configuration</h2> <p>PX4 allows the user to control the behavior of the autopilot through hundreds of parameters. This is the main way that we customize the OpenUAS and control its behavior.</p> <p>The current parameters of the connected vehicle set can always be viewed in <a href="/Software/QGroundControl.html">QGroundControl</a> under vehicle setup &gt; parameters.
<img src="/61fdc4d9b26378788c8dc9d9490c170a.png" alt="Parameters"></p> <p>Some parameters are initialized by the airframe definition file, ex: <a href="https://github.com/Open-UAS/PX4-Autopilot/blob/stable/ROMFS/px4fmu_common/init.d/airframes/2150_open_uas" target="_blank" rel="noopener noreferrer">PX4-Autopilot/ROMFS/px4fmu_common/init.d/airframes/2150_open_uas<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and some parameters are modified later by the user. Because of this, all modified parameters are reset when switching to a new airframe, but parameters are saved if the vehicle is simply powered off.</p> <h3 id="important-parameters"><a href="#important-parameters" class="header-anchor">#</a> Important Parameters</h3> <p>PX4 includes hundreds of parameters to modify, a full list of all available parameters can be found in the <a href="https://docs.px4.io/main/en/advanced_config/parameter_reference.html" target="_blank" rel="noopener noreferrer">PX4 docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Below are some parameters of note that we have modified in the past.</p> <h4 id="bat1-capacity"><a href="#bat1-capacity" class="header-anchor">#</a> BAT1_CAPACITY</h4> <p>Specifies the capacity of the battery in mAh. Needed for accurate battery percentage readings.</p> <h4 id="bat1-n-cells"><a href="#bat1-n-cells" class="header-anchor">#</a> BAT1_N_CELLS</h4> <p>Specifies the number of cells our battery has (we normally use 3S batteries). Needed for an accurate voltage measurement of the battery.</p> <h4 id="bat1-v-charged"><a href="#bat1-v-charged" class="header-anchor">#</a> BAT1_V_CHARGED</h4> <p>Specifies the charged voltage of one cell of the battery. Needed for accurate battery percentage readings. This value is typically around 4.2V (12.6V total battery voltage when fully charged)</p> <h4 id="bat1-v-empty"><a href="#bat1-v-empty" class="header-anchor">#</a> BAT1_V_EMPTY</h4> <p>Specifies the voltage to classify a battery cell as empty. Needed for accurate battery percentage readings. A safe value would be around 3.5V (giving total battery voltage of 10.5 when empty). Can use more of the battery by setting this value to around 3V (9v total battery voltage when empty). DO NOT set this value lower than 2.8V.</p> <h4 id="bat1-r-internal"><a href="#bat1-r-internal" class="header-anchor">#</a> BAT1_R_INTERNAL</h4> <p>Specifies the internal resistance of the battery in ohms. Optionally needed to improve the battery percentage readings and current draw readings. This value can be measured using the battery charger we have in the lab. A typical value is around 0.006 ohms.</p> <h4 id="com-arm-wo-gps"><a href="#com-arm-wo-gps" class="header-anchor">#</a> COM_ARM_WO_GPS</h4> <p>Allows for PX4 to be armed without a GPS signal. This is required to arm the OpenUAS in the basement of Howe where no GPS signal can be acquired.</p> <h4 id="com-disarm-land"><a href="#com-disarm-land" class="header-anchor">#</a> COM_DISARM_LAND</h4> <p>Specifies the amount of time after landing to automatically disarm the vehicle. If set to 0s, does not disarm on landing. This parameter is intended more for quad-copters than fixed wing planes. We typically set this value to 0 to not disarm on landing.</p> <h4 id="com-disarm-prflt"><a href="#com-disarm-prflt" class="header-anchor">#</a> COM_DISARM_PRFLT</h4> <p>Specifies the amount of time after arming which if not taken off, will automatically disarm the vehicle. If set to 0s, does not disarm. We typically set this value to 0 to not disarm when trying to takeoff.</p> <h4 id="fw-flaps-scl"><a href="#fw-flaps-scl" class="header-anchor">#</a> FW_FLAPS_SCL</h4> <p>Specifies a scale factor for the flaps. If set to 100% the flaps will move the ailerons to the their max travel when flaps are deployed, 50% will move them half of their travel.</p> <h4 id="fw-lnd-earlycfg"><a href="#fw-lnd-earlycfg" class="header-anchor">#</a> FW_LND_EARLYCFG</h4> <p>When true, sets the flaps position during the final loiter loop of the automatic landing sequence instead of on the final approach. Typically set to true.</p> <h4 id="fw-p-lim-max-and-fw-p-lim-min"><a href="#fw-p-lim-max-and-fw-p-lim-min" class="header-anchor">#</a> FW_P_LIM_MAX and FW_P_LIM_MIN</h4> <p>Specifies the min and max pitch angles the controller will command the vehicle to achieve. This is only in effect in autonomous modes, including altitude and position control flight mode.</p> <h4 id="fw-r-lim"><a href="#fw-r-lim" class="header-anchor">#</a> FW_R_LIM</h4> <p>Specifies the max roll angle the controller will command the vehicle to achieve. This is only in effect in autonomous modes, including altitude and position control flight mode.</p> <h4 id="laun-all-on"><a href="#laun-all-on" class="header-anchor">#</a> LAUN_ALL_ON</h4> <p>Turns on launch detection to launch the vehicle with a catapult launch or with a hand launch</p> <h4 id="laun-cat-a"><a href="#laun-cat-a" class="header-anchor">#</a> LAUN_CAT_A</h4> <p>Specifies the acceleration threshold to detect a launch event.</p> <h4 id="laun-cat-t"><a href="#laun-cat-t" class="header-anchor">#</a> LAUN_CAT_T</h4> <p>Specifies the required time an acceleration must be held for to detect a launch event.</p> <h4 id="nav-acc-rad"><a href="#nav-acc-rad" class="header-anchor">#</a> NAV_ACC_RAD</h4> <p>Specifies the acceptance radius of hitting a waypoint in autonomous flight.</p> <h4 id="pwm-main-trim0"><a href="#pwm-main-trim0" class="header-anchor">#</a> PWM_MAIN_TRIM0</h4> <p>Trims the center point of the servo number at the end of the parameter name. Needed to center each servo before flight.</p> <h4 id="pwm-main-rev0"><a href="#pwm-main-rev0" class="header-anchor">#</a> PWM_MAIN_REV0</h4> <p>Reverses the direction of the server number at the end of the parameter name.</p> <h4 id="rwto-tkoff"><a href="#rwto-tkoff" class="header-anchor">#</a> RWTO_TKOFF</h4> <p>Specifies we are taking off on a runway with landing gear. Used for automatic takeoff.</p> <h4 id="sens-en-sf0x"><a href="#sens-en-sf0x" class="header-anchor">#</a> SENS_EN_SF0X</h4> <p>Sets what LightWare sensor is in use for the <em>serial port</em>, normally set to SF11/c.</p> <h4 id="sens-sf0x-cfg"><a href="#sens-sf0x-cfg" class="header-anchor">#</a> SENS_SF0X_CFG</h4> <p>Sets what <em>serial port</em> the LightWare distance sensor is plugged into. Normally set to TELEM2.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Open-UAS/Open-UAS.github.io/edit/main/docs/Software/PX4.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated (UTC):</span> <span class="time">9/12/2024, 4:30:26 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Software/QGroundControl.html">
        QGroundControl
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.eda22d22.js" defer></script><script src="/assets/js/2.517fe05d.js" defer></script><script src="/assets/js/9.8b8db00a.js" defer></script>
  </body>
</html>
